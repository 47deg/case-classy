<html><head><meta charset="utf-8" /><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" /><title>Case Classy</title><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="description" content="configuration with less hassle" /><meta name="author" content="the contributors" /><meta name="og:image" content="/img/poster.png" /><meta name="og:title" content="Case Classy" /><meta name="og:site_name" content="Case Classy" /><meta name="og:url" content="https://github.com/47deg/case-classy" /><meta name="og:type" content="website" /><meta name="og:description" content="configuration with less hassle" /><meta name="twitter:image" content="/img/poster.png" /><meta name="twitter:card" content="summary_large_image" /><meta name="twitter:site" content="" /><link rel="icon" type="image/png" href="/img/favicon.png" /><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" /><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css" /><link rel="stylesheet" href="/highlight/styles/atom-one-light.css" /><link rel="stylesheet" href="/css/style.css" /><link rel="stylesheet" href="/css/palette.css" /><link rel="stylesheet" href="/css/overrides.css" /></head><body><header id="site-header"><div class="navbar-wrapper navbar-inverse"><div class="container"><div class="navbar-header"><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a href="/" class="brand"><div class="icon-wrapper" style="background:url('/img/navbar_brand.png') no-repeat"><span>Case Classy</span></div></a></div><nav class="text-right"><ul class=""><li><a href="https://github.com/47deg/case-classy"><i class="fa fa-github"></i><span class="hidden-xs">GitHub</span></a></li></ul></nav></div></div><div class="jumbotron" style="background-image:url('/img/jumbotron_pattern.png')"></div><div><ul class="horizontalNav">       <li><a class=" active " href="/getting-started.html">Getting Started</a></li>  <li><a class="" href="/derived.html">Derived</a></li>  <li><a class="" href="/examples.html">Examples</a></li>  <li><a class="" href="/scaladoc.html">Scaladoc</a></li> </ul></div></header><main id="site-main"><section class="use"><div class="container"><div id="content"><h2 id="getting-started">Getting Started</h2>

<p>Case classy usage is straightforward. You can use the generic
facilities to derive config decoders automatically, you can write
decoders by hand, or you can combine approaches.</p>

<p>Generally speaking, you will want to add the following:</p>

<div class="language-scala highlighter-rouge"><pre class="highlight"><code><span class="k">import</span> <span class="nn">classy.core._</span>
</code></pre>
</div>

<h3 id="decoder-basics">Decoder basics</h3>

<p>The main Classy type is <a href="api/classy/core/Decoder.html"><code class="highlighter-rouge">Decoder</code></a>, which
captures the ability to decode data of type <code class="highlighter-rouge">A</code> to type <code class="highlighter-rouge">B</code>. It has a
single unimplemented method <code class="highlighter-rouge">apply</code> that either returns an error or
the result.</p>

<div class="language-scala highlighter-rouge"><pre class="highlight"><code><span class="k">trait</span> <span class="nc">Decoder</span><span class="o">[</span><span class="kt">A</span>, <span class="kt">B</span><span class="o">]</span> <span class="o">{</span>
  <span class="k">def</span> <span class="n">apply</span><span class="o">(</span><span class="n">a</span><span class="k">:</span> <span class="kt">A</span><span class="o">)</span><span class="k">:</span> <span class="kt">Either</span><span class="o">[</span><span class="kt">DecodeError</span>, <span class="kt">B</span><span class="o">]</span>
<span class="o">}</span>
</code></pre>
</div>

<p>Decoder has many other final methods to facilitate combining and
chaining decoders. For example, we can create a dummy decoder and
then map the result:</p>

<div class="language-scala highlighter-rouge"><pre class="highlight"><code><span class="c1">// create a decoder for Int that always succeeds with the value
</span><span class="k">val</span> <span class="n">decoder0</span><span class="k">:</span> <span class="kt">Decoder</span><span class="o">[</span><span class="kt">Int</span>, <span class="kt">Int</span><span class="o">]</span> <span class="k">=</span> <span class="nc">Decoder</span><span class="o">.</span><span class="n">instance</span><span class="o">(</span><span class="n">value</span> <span class="k">=&gt;</span> <span class="nc">Right</span><span class="o">(</span><span class="n">value</span><span class="o">))</span>

<span class="c1">// create a new decoder by mapping the result to a string
</span><span class="k">val</span> <span class="n">decoder1</span><span class="k">:</span> <span class="kt">Decoder</span><span class="o">[</span><span class="kt">Int</span>, <span class="kt">String</span><span class="o">]</span> <span class="k">=</span> <span class="n">decoder0</span><span class="o">.</span><span class="n">map</span><span class="o">(</span><span class="k">_</span><span class="o">.</span><span class="n">toString</span><span class="o">)</span>
</code></pre>
</div>

<p>And we can easily decode to <code class="highlighter-rouge">Option</code>:</p>

<div class="language-scala highlighter-rouge"><pre class="highlight"><code><span class="k">val</span> <span class="n">decoder2</span><span class="k">:</span> <span class="kt">Decoder</span><span class="o">[</span><span class="kt">Int</span>, <span class="kt">Option</span><span class="o">[</span><span class="kt">String</span><span class="o">]]</span> <span class="k">=</span> <span class="n">decoder1</span><span class="o">.</span><span class="n">optional</span>
</code></pre>
</div>

<p>Or decode a lists of inputs to a list of outputs:</p>

<div class="language-scala highlighter-rouge"><pre class="highlight"><code><span class="k">val</span> <span class="n">decoder3</span><span class="k">:</span> <span class="kt">Decoder</span><span class="o">[</span><span class="kt">List</span><span class="o">[</span><span class="kt">Int</span><span class="o">]</span>, <span class="kt">List</span><span class="o">[</span><span class="kt">String</span><span class="o">]]</span> <span class="k">=</span> <span class="n">decoder1</span><span class="o">.</span><span class="n">sequence</span><span class="o">[</span><span class="kt">List</span><span class="o">]</span>
</code></pre>
</div>

<p>Decoding primitive types, such as Int, isn’t tremendously useful on it’s own.
What we really want to do is decode more complicated data structures, such as
a <code class="highlighter-rouge">Map</code> or a <code class="highlighter-rouge">Config</code> object.</p>

<div class="language-scala highlighter-rouge"><pre class="highlight"><code><span class="k">def</span> <span class="n">decodeString</span><span class="o">(</span><span class="n">path</span><span class="k">:</span> <span class="kt">String</span><span class="o">)</span><span class="k">:</span> <span class="kt">Decoder</span><span class="o">[</span><span class="kt">Map</span><span class="o">[</span><span class="kt">String</span>, <span class="kt">String</span><span class="o">]</span>, <span class="kt">String</span><span class="o">]</span> <span class="k">=</span>
  <span class="nc">Decoder</span><span class="o">.</span><span class="n">instance</span><span class="o">(</span><span class="k">_</span><span class="o">.</span><span class="n">get</span><span class="o">(</span><span class="n">path</span><span class="o">).</span><span class="n">toRight</span><span class="o">(</span><span class="nc">DecodeError</span><span class="o">.</span><span class="nc">Missing</span><span class="o">.</span><span class="n">atPath</span><span class="o">(</span><span class="n">path</span><span class="o">)))</span>

<span class="k">val</span> <span class="n">decodeA</span> <span class="k">=</span> <span class="n">decodeString</span><span class="o">(</span><span class="s">"a"</span><span class="o">)</span>
<span class="k">val</span> <span class="n">decodeB</span> <span class="k">=</span> <span class="n">decodeString</span><span class="o">(</span><span class="s">"b"</span><span class="o">)</span>

<span class="k">val</span> <span class="n">decodeAandB</span><span class="k">:</span> <span class="kt">Decoder</span><span class="o">[</span><span class="kt">Map</span><span class="o">[</span><span class="kt">String</span>, <span class="kt">String</span><span class="o">]</span>, <span class="o">(</span><span class="kt">String</span>, <span class="kt">String</span><span class="o">)]</span> <span class="k">=</span>
  <span class="n">decodeA</span> <span class="n">join</span> <span class="n">decodeB</span>

<span class="k">case</span> <span class="k">class</span> <span class="nc">Res</span><span class="o">(</span><span class="n">a</span><span class="k">:</span> <span class="kt">String</span><span class="o">,</span> <span class="n">b</span><span class="k">:</span> <span class="kt">String</span><span class="o">)</span>

<span class="k">val</span> <span class="n">decodeRes</span><span class="k">:</span> <span class="kt">Decoder</span><span class="o">[</span><span class="kt">Map</span><span class="o">[</span><span class="kt">String</span>, <span class="kt">String</span><span class="o">]</span>, <span class="kt">Res</span><span class="o">]</span> <span class="k">=</span>
  <span class="n">decodeAandB</span> <span class="n">map</span> <span class="nc">Res</span><span class="o">.</span><span class="n">tupled</span>
</code></pre>
</div>

<p>Now we can decode some values and see what happens:</p>

<div class="language-scala highlighter-rouge"><pre class="highlight"><code><span class="n">scala</span><span class="o">&gt;</span> <span class="n">decodeRes</span><span class="o">(</span><span class="nc">Map</span><span class="o">(</span><span class="s">"hello"</span> <span class="o">-&gt;</span> <span class="s">"world"</span><span class="o">))</span>
<span class="n">res7</span><span class="k">:</span> <span class="kt">scala.util.Either</span><span class="o">[</span><span class="kt">classy.core.DecodeError</span>,<span class="kt">Res</span><span class="o">]</span> <span class="k">=</span> <span class="nc">Left</span><span class="o">(</span><span class="nc">And</span><span class="o">(</span><span class="nc">AtPath</span><span class="o">(</span><span class="n">a</span><span class="o">,</span><span class="nc">Missing</span><span class="o">),</span> <span class="nc">AtPath</span><span class="o">(</span><span class="n">b</span><span class="o">,</span><span class="nc">Missing</span><span class="o">)))</span>

<span class="n">scala</span><span class="o">&gt;</span> <span class="n">decodeRes</span><span class="o">(</span><span class="nc">Map</span><span class="o">(</span><span class="s">"a"</span> <span class="o">-&gt;</span> <span class="s">"foo"</span><span class="o">))</span>
<span class="n">res8</span><span class="k">:</span> <span class="kt">scala.util.Either</span><span class="o">[</span><span class="kt">classy.core.DecodeError</span>,<span class="kt">Res</span><span class="o">]</span> <span class="k">=</span> <span class="nc">Left</span><span class="o">(</span><span class="nc">AtPath</span><span class="o">(</span><span class="n">b</span><span class="o">,</span><span class="nc">Missing</span><span class="o">))</span>

<span class="n">scala</span><span class="o">&gt;</span> <span class="n">decodeRes</span><span class="o">(</span><span class="nc">Map</span><span class="o">(</span><span class="s">"a"</span> <span class="o">-&gt;</span> <span class="s">"foo"</span><span class="o">,</span> <span class="s">"b"</span> <span class="o">-&gt;</span> <span class="s">"bar"</span><span class="o">))</span>
<span class="n">res9</span><span class="k">:</span> <span class="kt">scala.util.Either</span><span class="o">[</span><span class="kt">classy.core.DecodeError</span>,<span class="kt">Res</span><span class="o">]</span> <span class="k">=</span> <span class="nc">Right</span><span class="o">(</span><span class="nc">Res</span><span class="o">(</span><span class="n">foo</span><span class="o">,</span><span class="n">bar</span><span class="o">))</span>
</code></pre>
</div>

<p>Above we created a helper method <code class="highlighter-rouge">decodeString</code> that let us easily create
a decoder for a path within our <code class="highlighter-rouge">Map</code>. This pattern is very common. In fact,
it’s so ubiquitous that we introduce a type to capture this pattern:</p>

<div class="language-scala highlighter-rouge"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Read</span><span class="o">[</span><span class="kt">A</span>, <span class="kt">B</span><span class="o">]</span> <span class="o">{</span>
  <span class="k">def</span> <span class="n">apply</span><span class="o">(</span><span class="n">path</span><span class="k">:</span> <span class="kt">String</span><span class="o">)</span><span class="k">:</span> <span class="kt">Decoder</span><span class="o">[</span><span class="kt">A</span>, <span class="kt">B</span><span class="o">]</span>
<span class="o">}</span>
</code></pre>
</div>

<p>It’s unlikely that you’ll need to
use <a href="api/classy/core/Read.html"><code class="highlighter-rouge">Read</code></a> directly since Case Classy
provides most helpers and decoders in the standard modules.  However,
it’s an important foundation for the library and occasionally shows up
in implicit errors if you’re decoding types that aren’t already
supported.</p>
</div></div></section></main><footer id="site-footer"><div class="container"><div class="row"><div class="col-xs-6"><p>Case Classy is designed and developed by <a href="https://github.com/47deg/case-classy" target="_blank">the contributors</a></p></div><div class="col-xs-6"><p class="text-right"><a href="https://github.com/47deg/case-classy"><span class="fa fa-github"></span>View on Github</a></p></div></div></div></footer><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script><script src="/highlight/highlight.pack.js"></script><script>hljs.configure({
languages:['scala','java','bash']
});
hljs.initHighlighting();
             </script></body></html>